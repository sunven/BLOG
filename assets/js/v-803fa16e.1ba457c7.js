"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[6692],{2242:(n,s,e)=>{e.r(s),e.d(s,{data:()=>a});const a={key:"v-803fa16e",path:"/tool/other/shelllftpdeploy.html",title:"在shell脚本中利用lftp做自动部署",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"mac os",slug:"mac-os",children:[]},{level:2,title:"windows",slug:"windows",children:[]}],filePathRelative:"tool/other/shelllftpdeploy.md",git:{updatedTime:1626107275e3,contributors:[{name:"sunven",email:"604164227@qq.com",commits:1}]}}},6158:(n,s,e)=>{e.r(s),e.d(s,{default:()=>m});var a=e(6252);const l=(0,a._)("h1",{id:"在shell脚本中利用lftp做自动部署",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#在shell脚本中利用lftp做自动部署","aria-hidden":"true"},"#"),(0,a.Uk)(" 在shell脚本中利用lftp做自动部署")],-1),p={href:"https://lftp.yar.ru/",target:"_blank",rel:"noopener noreferrer"},r=(0,a.Uk)("LFTP"),t=(0,a.uE)('<h2 id="mac-os" tabindex="-1"><a class="header-anchor" href="#mac-os" aria-hidden="true">#</a> mac os</h2><p>新建<code>deploy.sh</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>\n\n<span class="token comment">#SFTP配置信息</span>\n<span class="token comment">#用户名</span>\n<span class="token assign-left variable"><span class="token environment constant">USER</span></span><span class="token operator">=</span>******\n<span class="token comment">#密码</span>\n<span class="token assign-left variable">PASSWORD</span><span class="token operator">=</span>******\n<span class="token comment">#待上传文件根目录</span>\n<span class="token assign-left variable">SRCDIR</span><span class="token operator">=</span>./docs/.vuepress/dist\n<span class="token comment">#FTP目录</span>\n<span class="token assign-left variable">DESDIR</span><span class="token operator">=</span>/home/llweb.top\n<span class="token comment">#IP</span>\n<span class="token assign-left variable">IP</span><span class="token operator">=</span>******\n\n<span class="token comment"># 连不上</span>\n<span class="token comment"># lftp -e &quot;mirror -R ${SRCDIR} ${DESDIR}&quot; -u ${USER},${PASSWORD} sftp://${IP}</span>\n\nlftp -u <span class="token variable">${<span class="token environment constant">USER</span>}</span>,<span class="token variable">${PASSWORD}</span> sftp://<span class="token variable">${IP}</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF\n# rm -rf /home/llweb.top\nmirror -R --delete --ignore-time --only-newer --exclude-glob *.html --verbose --use-pget-n=8 -p -c <span class="token variable">${SRCDIR}</span> <span class="token variable">${DESDIR}</span>\nmirror -R --delete --only-newer --include-glob *.html --verbose --use-pget-n=8 -p -c <span class="token variable">${SRCDIR}</span> <span class="token variable">${DESDIR}</span>\nby\nEOF</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>执行<code>sh deploy.sh</code></p><h2 id="windows" tabindex="-1"><a class="header-anchor" href="#windows" aria-hidden="true">#</a> windows</h2>',5),o=(0,a.Uk)("下载"),c={href:"https://nwgat.ninja/lftp-for-windows/",target:"_blank",rel:"noopener noreferrer"},i=(0,a.Uk)("LFTP for Windows"),b=(0,a.uE)('<p>解压后将<code>bin</code>目录加入环境变量</p><p>新建<code>windowsdeploy.lftp</code></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>set sftp:auto-confirm &quot;yes&quot;\nopen sftp://username:pwd@site\n# rm -rf /home/llweb.top\nmirror -R --delete --ignore-time --only-newer --exclude-glob *.html --verbose --use-pget-n=8 -p -c ./docs/.vuepress/dist /home/llweb.top\nmirror -R --delete --only-newer --include-glob *.html --verbose --use-pget-n=8 -p -c ./docs/.vuepress/dist /home/llweb.top\n# chmod 644 /home/llweb.top/*\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>执行<code>lftp.exe -f windowsdeploy.lftp</code></p>',4),m={render:function(n,s){const e=(0,a.up)("OutboundLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l,(0,a._)("p",null,[(0,a._)("a",p,[r,(0,a.Wm)(e)])]),t,(0,a._)("p",null,[o,(0,a._)("a",c,[i,(0,a.Wm)(e)])]),b],64)}}}}]);