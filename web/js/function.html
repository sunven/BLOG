<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.25">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><title>函数 | sunven</title><meta name="description" content="笔记、博客、awesome">
    <link rel="preload" href="/blog/assets/js/runtime~app.f6f85616.js" as="script"><link rel="preload" href="/blog/assets/css/styles.de2f45b5.css" as="style"><link rel="preload" href="/blog/assets/js/2968.8f760309.js" as="script"><link rel="preload" href="/blog/assets/js/app.0747b7df.js" as="script">
    <link rel="stylesheet" href="/blog/assets/css/styles.de2f45b5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><!----><span class="site-name">sunven</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="develop"><span class="title">develop</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="develop"><span class="title">develop</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/develop/algorithm/index.html" class="nav-link" aria-label="algorithm"><!--[--><!--]--> algorithm <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/docker/index.html" class="nav-link" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/other/index.html" class="nav-link" aria-label="other"><!--[--><!--]--> other <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/packages/npm.html" class="nav-link" aria-label="packages"><!--[--><!--]--> packages <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/pic/index.html" class="nav-link" aria-label="pic"><!--[--><!--]--> pic <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/python/index.html" class="nav-link" aria-label="python"><!--[--><!--]--> python <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/safe/index.html" class="nav-link" aria-label="safe"><!--[--><!--]--> safe <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/sql/index.html" class="nav-link" aria-label="sql"><!--[--><!--]--> sql <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="docker"><span class="title">docker</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="docker"><span class="title">docker</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/docker/intro.html" class="nav-link" aria-label="intro"><!--[--><!--]--> intro <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="dotnet"><span class="title">dotnet</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="dotnet"><span class="title">dotnet</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/dotnet/abp/index.html" class="nav-link" aria-label="abp"><!--[--><!--]--> abp <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/dotnet/ddd/index.html" class="nav-link" aria-label="ddd"><!--[--><!--]--> ddd <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/dotnet/designpatterns/index.html" class="nav-link" aria-label="designpatterns"><!--[--><!--]--> designpatterns <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/dotnet/microservice/index.html" class="nav-link" aria-label="microservice"><!--[--><!--]--> microservice <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/dotnet/other/index.html" class="nav-link" aria-label="other"><!--[--><!--]--> other <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/dotnet/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="reading"><span class="title">reading</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="reading"><span class="title">reading</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/reading/goodarticle/2019-01.html" class="nav-link" aria-label="goodarticle"><!--[--><!--]--> goodarticle <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/jsdesignpattern/sheet1.html" class="nav-link" aria-label="jsdesignpattern"><!--[--><!--]--> jsdesignpattern <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/jsdpanddp/jsdpanddp-base.html" class="nav-link" aria-label="jsdpanddp"><!--[--><!--]--> jsdpanddp <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/book.html" class="nav-link" aria-label="book"><!--[--><!--]--> book <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/distributed.html" class="nav-link" aria-label="distributed"><!--[--><!--]--> distributed <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/html5css3.html" class="nav-link" aria-label="html5css3"><!--[--><!--]--> html5css3 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/professionaljavascript.html" class="nav-link" aria-label="professionaljavascript"><!--[--><!--]--> professionaljavascript <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="subject"><span class="title">subject</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="subject"><span class="title">subject</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/subject/math/advanced-mathematics-production-based.html" class="nav-link" aria-label="math"><!--[--><!--]--> math <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="tool"><span class="title">tool</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="tool"><span class="title">tool</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/tool/chrome/index.html" class="nav-link" aria-label="chrome"><!--[--><!--]--> chrome <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/git/index.html" class="nav-link" aria-label="git"><!--[--><!--]--> git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/mac/index.html" class="nav-link" aria-label="mac"><!--[--><!--]--> mac <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/other/index.html" class="nav-link" aria-label="other"><!--[--><!--]--> other <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/sublimetext/index.html" class="nav-link" aria-label="sublimetext"><!--[--><!--]--> sublimetext <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/ubuntu/index.html" class="nav-link" aria-label="ubuntu"><!--[--><!--]--> ubuntu <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/vscode/index.html" class="nav-link" aria-label="vscode"><!--[--><!--]--> vscode <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/Aria2.html" class="nav-link" aria-label="Aria2"><!--[--><!--]--> Aria2 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/awesome.html" class="nav-link" aria-label="awesome"><!--[--><!--]--> awesome <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="web"><span class="title">web</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="web"><span class="title">web</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/web/css/index.html" class="nav-link" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/es6/index.html" class="nav-link" aria-label="es6"><!--[--><!--]--> es6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/js/index.html" class="nav-link" aria-label="js"><!--[--><!--]--> js <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/other/index.html" class="nav-link" aria-label="other"><!--[--><!--]--> other <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/react/index.html" class="nav-link" aria-label="react"><!--[--><!--]--> react <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/vue/index.html" class="nav-link" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/webpack/intro.html" class="nav-link" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/blog/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/sunven/blog" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="develop"><span class="title">develop</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="develop"><span class="title">develop</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/develop/algorithm/index.html" class="nav-link" aria-label="algorithm"><!--[--><!--]--> algorithm <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/docker/index.html" class="nav-link" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/other/index.html" class="nav-link" aria-label="other"><!--[--><!--]--> other <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/packages/npm.html" class="nav-link" aria-label="packages"><!--[--><!--]--> packages <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/pic/index.html" class="nav-link" aria-label="pic"><!--[--><!--]--> pic <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/python/index.html" class="nav-link" aria-label="python"><!--[--><!--]--> python <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/safe/index.html" class="nav-link" aria-label="safe"><!--[--><!--]--> safe <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/sql/index.html" class="nav-link" aria-label="sql"><!--[--><!--]--> sql <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/develop/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="docker"><span class="title">docker</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="docker"><span class="title">docker</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/docker/intro.html" class="nav-link" aria-label="intro"><!--[--><!--]--> intro <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="dotnet"><span class="title">dotnet</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="dotnet"><span class="title">dotnet</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/dotnet/abp/index.html" class="nav-link" aria-label="abp"><!--[--><!--]--> abp <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/dotnet/ddd/index.html" class="nav-link" aria-label="ddd"><!--[--><!--]--> ddd <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/dotnet/designpatterns/index.html" class="nav-link" aria-label="designpatterns"><!--[--><!--]--> designpatterns <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/dotnet/microservice/index.html" class="nav-link" aria-label="microservice"><!--[--><!--]--> microservice <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/dotnet/other/index.html" class="nav-link" aria-label="other"><!--[--><!--]--> other <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/dotnet/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="reading"><span class="title">reading</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="reading"><span class="title">reading</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/reading/goodarticle/2019-01.html" class="nav-link" aria-label="goodarticle"><!--[--><!--]--> goodarticle <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/jsdesignpattern/sheet1.html" class="nav-link" aria-label="jsdesignpattern"><!--[--><!--]--> jsdesignpattern <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/jsdpanddp/jsdpanddp-base.html" class="nav-link" aria-label="jsdpanddp"><!--[--><!--]--> jsdpanddp <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/book.html" class="nav-link" aria-label="book"><!--[--><!--]--> book <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/distributed.html" class="nav-link" aria-label="distributed"><!--[--><!--]--> distributed <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/html5css3.html" class="nav-link" aria-label="html5css3"><!--[--><!--]--> html5css3 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/reading/professionaljavascript.html" class="nav-link" aria-label="professionaljavascript"><!--[--><!--]--> professionaljavascript <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="subject"><span class="title">subject</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="subject"><span class="title">subject</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/subject/math/advanced-mathematics-production-based.html" class="nav-link" aria-label="math"><!--[--><!--]--> math <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="tool"><span class="title">tool</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="tool"><span class="title">tool</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/tool/chrome/index.html" class="nav-link" aria-label="chrome"><!--[--><!--]--> chrome <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/git/index.html" class="nav-link" aria-label="git"><!--[--><!--]--> git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/mac/index.html" class="nav-link" aria-label="mac"><!--[--><!--]--> mac <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/other/index.html" class="nav-link" aria-label="other"><!--[--><!--]--> other <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/sublimetext/index.html" class="nav-link" aria-label="sublimetext"><!--[--><!--]--> sublimetext <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/ubuntu/index.html" class="nav-link" aria-label="ubuntu"><!--[--><!--]--> ubuntu <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/vscode/index.html" class="nav-link" aria-label="vscode"><!--[--><!--]--> vscode <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/Aria2.html" class="nav-link" aria-label="Aria2"><!--[--><!--]--> Aria2 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/tool/awesome.html" class="nav-link" aria-label="awesome"><!--[--><!--]--> awesome <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="web"><span class="title">web</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="web"><span class="title">web</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/blog/web/css/index.html" class="nav-link" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/es6/index.html" class="nav-link" aria-label="es6"><!--[--><!--]--> es6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/js/index.html" class="nav-link" aria-label="js"><!--[--><!--]--> js <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/other/index.html" class="nav-link" aria-label="other"><!--[--><!--]--> other <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/react/index.html" class="nav-link" aria-label="react"><!--[--><!--]--> react <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/vue/index.html" class="nav-link" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/webpack/intro.html" class="nav-link" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blog/web/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/blog/index.html" class="nav-link" aria-label="README"><!--[--><!--]--> README <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/sunven/blog" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active"></p><ul class=""><li><!--[--><a href="/blog/web/js/" class="nav-link router-link-active sidebar-item" aria-label="js"><!--[--><!--]--> js <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/amdandcmd.html" class="nav-link sidebar-item" aria-label="AMD 和 CMD"><!--[--><!--]--> AMD 和 CMD <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/backbonejs.html" class="nav-link sidebar-item" aria-label="backbonejs"><!--[--><!--]--> backbonejs <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/canvas.html" class="nav-link sidebar-item" aria-label="canvas"><!--[--><!--]--> canvas <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/classandmodule.html" class="nav-link sidebar-item" aria-label="类和模块"><!--[--><!--]--> 类和模块 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/component.html" class="nav-link sidebar-item" aria-label="组件"><!--[--><!--]--> 组件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/debounceandthrottle.html" class="nav-link sidebar-item" aria-label="函数防抖与函数节流"><!--[--><!--]--> 函数防抖与函数节流 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="函数"><!--[--><!--]--> 函数 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#一、函数定义" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="一、函数定义"><!--[--><!--]--> 一、函数定义 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_1-函数表达式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1. 函数表达式"><!--[--><!--]--> 1. 函数表达式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_2-函数声明" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2. 函数声明"><!--[--><!--]--> 2. 函数声明 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_3-声明提前" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3. “声明提前？”"><!--[--><!--]--> 3. “声明提前？” <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#二、函数调用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="二、函数调用"><!--[--><!--]--> 二、函数调用 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_1-作为函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.  作为函数"><!--[--><!--]--> 1.  作为函数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_2-作为方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2. 作为方法"><!--[--><!--]--> 2. 作为方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_3-作为构造函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3. 作为构造函数"><!--[--><!--]--> 3. 作为构造函数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_4-通过它们的call-和apply-方法间接调用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4. 通过它们的call()和apply()方法间接调用"><!--[--><!--]--> 4. 通过它们的call()和apply()方法间接调用 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#三、函数的实参和形参" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="三、函数的实参和形参"><!--[--><!--]--> 三、函数的实参和形参 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_1-可选形参" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1. 可选形参"><!--[--><!--]--> 1. 可选形参 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_2-可变长的实参列表-实参对象" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2. 可变长的实参列表：实参对象"><!--[--><!--]--> 2. 可变长的实参列表：实参对象 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_3-将对象属性用做实参" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3. 将对象属性用做实参"><!--[--><!--]--> 3. 将对象属性用做实参 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_4-实参类型" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4. 实参类型"><!--[--><!--]--> 4. 实参类型 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#四、作为值的函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="四、作为值的函数"><!--[--><!--]--> 四、作为值的函数 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_1-自定义函数属性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1. 自定义函数属性"><!--[--><!--]--> 1. 自定义函数属性 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#五、作为命名空间的函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="五、作为命名空间的函数"><!--[--><!--]--> 五、作为命名空间的函数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#六、闭包" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="六、闭包"><!--[--><!--]--> 六、闭包 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_1-实现闭包" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1. 实现闭包"><!--[--><!--]--> 1. 实现闭包 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_2-reference" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2. Reference"><!--[--><!--]--> 2. Reference <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#七、函数属性、方法和构造函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="七、函数属性、方法和构造函数"><!--[--><!--]--> 七、函数属性、方法和构造函数 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_1-length属性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1. length属性"><!--[--><!--]--> 1. length属性 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_2-prototype属性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2. prototype属性"><!--[--><!--]--> 2. prototype属性 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_3-call-方法和apply-方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3. call()方法和apply()方法"><!--[--><!--]--> 3. call()方法和apply()方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_4-bind-方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4. bind()方法"><!--[--><!--]--> 4. bind()方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_5-tostring-方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5. toString()方法"><!--[--><!--]--> 5. toString()方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_6-function-构造函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="6. Function()构造函数"><!--[--><!--]--> 6. Function()构造函数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_7-可调用的对象" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="7. 可调用的对象"><!--[--><!--]--> 7. 可调用的对象 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#八、函数式编程" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="八、函数式编程"><!--[--><!--]--> 八、函数式编程 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_1-使用函数处理数组" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1. 使用函数处理数组"><!--[--><!--]--> 1. 使用函数处理数组 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_2-高阶函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2. 高阶函数"><!--[--><!--]--> 2. 高阶函数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_3-不完全函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3. 不完全函数"><!--[--><!--]--> 3. 不完全函数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/web/js/function.html#_4-记忆" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4. 记忆"><!--[--><!--]--> 4. 记忆 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/blog/web/js/html5api.html" class="nav-link sidebar-item" aria-label="HTML5 API"><!--[--><!--]--> HTML5 API <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/inherit.html" class="nav-link sidebar-item" aria-label="面向对象的程序设计-继承"><!--[--><!--]--> 面向对象的程序设计-继承 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/issue.html" class="nav-link sidebar-item" aria-label="ISSUE"><!--[--><!--]--> ISSUE <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/js-modular-programming.html" class="nav-link sidebar-item" aria-label="Javascript模块化编程"><!--[--><!--]--> Javascript模块化编程 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/js1.html" class="nav-link sidebar-item" aria-label="1"><!--[--><!--]--> 1 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/jslib.html" class="nav-link sidebar-item" aria-label="js 类库及插件收集"><!--[--><!--]--> js 类库及插件收集 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/regex.html" class="nav-link sidebar-item" aria-label="正则表达式基础"><!--[--><!--]--> 正则表达式基础 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/regexcollect.html" class="nav-link sidebar-item" aria-label="正则表达式集锦"><!--[--><!--]--> 正则表达式集锦 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/blog/web/js/requirejs.html" class="nav-link sidebar-item" aria-label="requirejs 基础"><!--[--><!--]--> requirejs 基础 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="函数" tabindex="-1"><a class="header-anchor" href="#函数" aria-hidden="true">#</a> 函数</h1><h2 id="一、函数定义" tabindex="-1"><a class="header-anchor" href="#一、函数定义" aria-hidden="true">#</a> 一、函数定义</h2><h3 id="_1-函数表达式" tabindex="-1"><a class="header-anchor" href="#_1-函数表达式" aria-hidden="true">#</a> 1. 函数表达式</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//这个函数返回传入参数值的平方</span>
<span class="token keyword">var</span> <span class="token function-variable function">square</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="使用" tabindex="-1"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//函数表达式可以包含名称，这在递归时很有用</span>
<span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">fact</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">return</span> x <span class="token operator">*</span> <span class="token function">fact</span><span class="token punctuation">(</span>x <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//函数表达式也可以作为参数传给其他函数</span>
data<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//函数表达式有时定义后立即调用</span>
<span class="token keyword">var</span> tensquared <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2-函数声明" tabindex="-1"><a class="header-anchor" href="#_2-函数声明" aria-hidden="true">#</a> 2. 函数声明</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//这个函数返回传入参数值的平方</span>
<span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>以表达式方式定义的函数，函数的名称是可选的。</li><li>一条函数声明语句实际上声明了一个变量，并把一个函数对象赋值给它。相对而言，定义函数表达式时并没有声明一个变量。函数可以命名，就像上面的阶乘函数，它需要一个名称来指代自己。</li><li>如果一个函数定义表达式包含名称，函数的局部作用域将会包含一个绑定到函数对象的名称。实际上，函数的名称将成为函数内部的一个局部变量。</li><li>通常而言，以表达式方式定义函数时都不需要名称，这会让定义它们的代码更为紧凑。</li><li>函数定义表达式特别适合用来定义那些只会用到一次的函数，比如上面展示的最后两个例子。</li></ul><h3 id="_3-声明提前" tabindex="-1"><a class="header-anchor" href="#_3-声明提前" aria-hidden="true">#</a> 3. “声明提前？”</h3><p>函数声明语句“被提前”到外部脚本或外部函数作用域的顶部，所以以这种方式声明的函数，可以被在它定义之前出现的代码所调用。不过，以表达式定义的函数就另当别论了，为了调用一个函数，必须要能引用它，而要使用一个以表达式方式定义的函数之前，必须把它赋值给一个变量。<strong>变量的声明提前了，但给变量赋值是不会提前的</strong>，所以，以表达式方式定义的函数在定义之前无法调用。</p><h2 id="二、函数调用" tabindex="-1"><a class="header-anchor" href="#二、函数调用" aria-hidden="true">#</a> 二、函数调用</h2><h3 id="_1-作为函数" tabindex="-1"><a class="header-anchor" href="#_1-作为函数" aria-hidden="true">#</a> 1. 作为函数</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">square</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>调用上下文（this的值）是全局对象。然而，在严格模式下，调用上下文则是undefined。 以函数形式调用的函数通常不使用this关键字。</p><p>&quot;this&quot;可以用来判断当前是否是严格模式。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//定义并调用一个函数来确定当前脚本运行时是否为严格模式</span>
<span class="token keyword">var</span> strict<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-作为方法" tabindex="-1"><a class="header-anchor" href="#_2-作为方法" aria-hidden="true">#</a> 2. 作为方法</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>o<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//使用方括号</span>
o<span class="token punctuation">[</span><span class="token string">&quot;m&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>方法调用和函数调用有一个重要的区别，即：调用上下文。属性访问表达式由两部分组成：一个对象（本例中的o）和属性名称（m）。在像这样的方法调用表达式里，对象o成为调用上下文，函数体可以使用关键字this引用该对象 任何函数只要作为方法调用实际上都会传入一个隐式的实参——这个实参是一个对象，方法调用的母体就是这个对象</p><h4 id="方法链" tabindex="-1"><a class="header-anchor" href="#方法链" aria-hidden="true">#</a> 方法链</h4><p>当方法并不需要返回值时，最好直接返回this。如果在设计的API中一直采用这种方式（每个方法都返回this），使用API就可以进行“链式调用”</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;:header&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>不要将方法的链式调用和构造函数的链式调用混为一谈</strong></p><ul><li><p>this是一个关键字，不是变量，也不是属性名。不允许给this赋值。</p></li><li><p>this没有作用域的限制，嵌套的函数不会从调用它的函数中继承this。</p></li><li><p>如果嵌套函数作为方法调用，其this的值指向调用它的对象。如果嵌套函数作为函数调用，其this值不是全局对象（非严格模式下）就是undefined（严格模式下）。</p></li><li><p>如果你想访问这个外部函数的this值，需要将this的值保存在一个变量里，这个变量和内部函数都同在一个作用域内。通常使用变量self来保存this</p></li></ul><h3 id="_3-作为构造函数" tabindex="-1"><a class="header-anchor" href="#_3-作为构造函数" aria-hidden="true">#</a> 3. 作为构造函数</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;:header&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>如果函数或者方法调用之前带有关键字new，它就构成构造函数调用 构造函数调用创建一个新的空对象，这个对象继承自构造函数的prototype属性。构造函数试图初始化这个新创建的对象，并将这个对象用做其调用上下文，因此构造函数可以使用this关键字来引用这个新创建的对象。注意，尽管构造函数看起来像一个方法调用，它依然会使用这个新对象作为调用上下文。也就是说，在表达式new o.m()中，调用上下文并不是o。</p><h3 id="_4-通过它们的call-和apply-方法间接调用" tabindex="-1"><a class="header-anchor" href="#_4-通过它们的call-和apply-方法间接调用" aria-hidden="true">#</a> 4. 通过它们的call()和apply()方法间接调用</h3><p>任何函数可以作为任何对象的方法来调用，哪怕这个函数不是那个对象的方法。两个方法都可以指定调用的实参。call()方法使用它自有的实参列表作为函数的实参，apply()方法则要求以数组的形式传入参数。</p><h2 id="三、函数的实参和形参" tabindex="-1"><a class="header-anchor" href="#三、函数的实参和形参" aria-hidden="true">#</a> 三、函数的实参和形参</h2><h3 id="_1-可选形参" tabindex="-1"><a class="header-anchor" href="#_1-可选形参" aria-hidden="true">#</a> 1. 可选形参</h3><h3 id="_2-可变长的实参列表-实参对象" tabindex="-1"><a class="header-anchor" href="#_2-可变长的实参列表-实参对象" aria-hidden="true">#</a> 2. 可变长的实参列表：实参对象</h3><p>arguments并不是真正的数组，它是一个实参对象。每个实参对象都包含以数字为索引的一组元素以及length属性，但它毕竟不是真正的数组</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出实参的初始值</span>
  arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token comment">//修改实参数组的元素同样会修改x的值</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出&quot;null&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="callee和caller属性" tabindex="-1"><a class="header-anchor" href="#callee和caller属性" aria-hidden="true">#</a> callee和caller属性</h4><p>caller是非标准的，但大多数浏览器都实现了这个属性，它指代调用当前正在执行的函数的函数。通过caller属性可以访问调用栈。callee属性在某些时候会非常有用，比如在匿名函数中通过callee来递归地调用自身</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">factorial</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>x＜<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>arguments<span class="token punctuation">.</span><span class="token function">callee</span><span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-将对象属性用做实参" tabindex="-1"><a class="header-anchor" href="#_3-将对象属性用做实参" aria-hidden="true">#</a> 3. 将对象属性用做实参</h3><h3 id="_4-实参类型" tabindex="-1"><a class="header-anchor" href="#_4-实参类型" aria-hidden="true">#</a> 4. 实参类型</h3><h2 id="四、作为值的函数" tabindex="-1"><a class="header-anchor" href="#四、作为值的函数" aria-hidden="true">#</a> 四、作为值的函数</h2><h3 id="_1-自定义函数属性" tabindex="-1"><a class="header-anchor" href="#_1-自定义函数属性" aria-hidden="true">#</a> 1. 自定义函数属性</h3><p>JavaScript中的函数并不是原始值，而是一种特殊的对象，也就是说，函数可以拥有属性。当函数需要一个“静态”变量来在调用时保持某个值不变，最方便的方式就是给函数定义属性，而不是定义全局变量</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//初始化函数对象的计数器属性</span>
<span class="token comment">//由于函数声明被提前了，因此这里是可以在函数声明</span>
<span class="token comment">//之前给它的成员赋值的</span>
uniqueInteger<span class="token punctuation">.</span>counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//每次调用这个函数都会返回一个不同的整数</span>
<span class="token comment">//它使用一个属性来记住下一次将要返回的值</span>
<span class="token keyword">function</span> <span class="token function">uniqueInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> uniqueInteger<span class="token punctuation">.</span>counter<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">//先返回计数器的值，然后计数器自增1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//计算阶乘，并将结果缓存至函数的属性中</span>
<span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>n <span class="token keyword">in</span> factorial<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//如果没有缓存结果</span>
        factorial<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> n <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//计算结果并缓存之</span>
    <span class="token keyword">return</span> factorial<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//返回缓存结果</span>
<span class="token punctuation">}</span>
factorial<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//初始化缓存以保存这种基本情况</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="五、作为命名空间的函数" tabindex="-1"><a class="header-anchor" href="#五、作为命名空间的函数" aria-hidden="true">#</a> 五、作为命名空间的函数</h2><p>立即执行函数</p><h2 id="六、闭包" tabindex="-1"><a class="header-anchor" href="#六、闭包" aria-hidden="true">#</a> 六、闭包</h2><p>理解：</p><ul><li>理解闭包首先要了解嵌套函数的词法作用域规则—JavaScript函数的执行用到了作用域链，这个作用域链是函数定义的时候创建的</li><li>理解闭包：函数定义时的作用域链到函数执行时依然有效。</li></ul><p>特性：</p><ul><li>函数对象可以通过作用域链相互关联起来，函数体内部的变量都可以保存在函数作用域内</li><li>它们可以捕捉到局部变量（和参数），并一直保存下来，看起来像这些变量绑定到了在其中定义它们的外部函数。</li></ul><p>当函数返回的时候，就从作用域链中将这个绑定变量的对象删除。如果不存在嵌套的函数，也没有其他引用指向这个绑定对象，它就会被当做垃圾回收掉。如果定义了嵌套的函数，每个嵌套的函数都各自对应一个作用域链，并且这个作用域链指向一个变量绑定对象。但如果这些嵌套的函数对象在外部函数中保存下来，那么它们也会和所指向的变量绑定对象一样当做垃圾回收。但是如果这个函数定义了嵌套的函数，并将它作为返回值返回或者存储在某处的属性里，这时就会有一个外部引用指向这个嵌套的函数。它就不会被当做垃圾回收，并且它所指向的变量绑定对象也不会被当做垃圾回收</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> scope <span class="token operator">=</span> <span class="token string">&quot;global scope&quot;</span><span class="token punctuation">;</span> <span class="token comment">//全局变量</span>
<span class="token keyword">function</span> <span class="token function">checkscope</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> scope <span class="token operator">=</span> <span class="token string">&quot;local scope&quot;</span><span class="token punctuation">;</span> <span class="token comment">//局部变量</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> scope<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">//在作用域中返回这个值</span>
    <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">checkscope</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//=＞&quot;local scope&quot;</span>

<span class="token keyword">var</span> scope <span class="token operator">=</span> <span class="token string">&quot;global scope&quot;</span><span class="token punctuation">;</span> <span class="token comment">//全局变量</span>
<span class="token keyword">function</span> <span class="token function">checkscope</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> scope <span class="token operator">=</span> <span class="token string">&quot;local scope&quot;</span><span class="token punctuation">;</span> <span class="token comment">//局部变量</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> scope<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">//在作用域中返回这个值</span>
    <span class="token keyword">return</span> f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">checkscope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//=＞&quot;local scope&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_1-实现闭包" tabindex="-1"><a class="header-anchor" href="#_1-实现闭包" aria-hidden="true">#</a> 1. 实现闭包</h3><h4 id="example1" tabindex="-1"><a class="header-anchor" href="#example1" aria-hidden="true">#</a> example1</h4><p>改写uniqueInteger()函数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> uniqueInteger<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//定义函数并立即调用</span>
    <span class="token keyword">var</span> counter<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//函数的私有状态</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> counter<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="example2" tabindex="-1"><a class="header-anchor" href="#example2" aria-hidden="true">#</a> example2</h4><p>函数的私有变量不是只能用在一个单独的闭包内，在同一个外部函数内定义的多个嵌套函数也可以访问它，这多个嵌套函数都共享一个作用域链</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">count</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> n<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//创建两个计数器</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    d <span class="token operator">=</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=＞0</span>
d<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=＞0:它们互不干扰</span>
c<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//reset()和count()方法共享状态</span>
c<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=＞0:因为我们重置了c</span>
d<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=＞1:而没有重置d</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="example3" tabindex="-1"><a class="header-anchor" href="#example3" aria-hidden="true">#</a> example3</h4><p>利用了闭包实现getter和setter</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//函数参数n是一个私有变量</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token comment">//属性getter方法返回并给私有计数器var递增1</span>
        <span class="token keyword">get</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> n<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//属性setter不允许n递减</span>
        <span class="token keyword">set</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>m <span class="token operator">&gt;=</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                n <span class="token operator">=</span> m<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span>count <span class="token comment">//=＞1000</span>
c<span class="token punctuation">.</span>count <span class="token comment">//=＞1001</span>
c<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">2000</span>
c<span class="token punctuation">.</span>count <span class="token comment">//=＞2000</span>
c<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">2000</span> <span class="token comment">//=＞Error!</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="example4" tabindex="-1"><a class="header-anchor" href="#example4" aria-hidden="true">#</a> example4</h4><p>利用闭包实现的私有属性存取器方法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//这个函数给对象o增加了属性存取器方法</span>
<span class="token comment">//方法名称为get＜name＞和set＜name＞。如果提供了一个判定函数</span>
<span class="token comment">//setter方法就会用它来检测参数的合法性，然后在存储它</span>
<span class="token comment">//如果判定函数返回false，setter方法抛出一个异常</span>
<span class="token comment">//</span>
<span class="token comment">//这个函数有一个非同寻常之处，就是getter和setter函数</span>
<span class="token comment">//所操作的属性值并没有存储在对象o中</span>
<span class="token comment">//相反，这个值仅仅是保存在函数中的局部变量中</span>
<span class="token comment">//getter和setter方法同样是局部函数，因此可以访问这个局部变量</span>
<span class="token comment">//也就是说，对于两个存取器方法来说这个变量是私有的</span>
<span class="token comment">//没有办法绕过存取器方法来设置或修改这个值</span>
<span class="token keyword">function</span> <span class="token function">addPrivateProperty</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> name<span class="token punctuation">,</span> predicate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> value<span class="token punctuation">;</span> <span class="token comment">//这是一个属性值</span>
    <span class="token comment">//getter方法简单地将其返回</span>
    o<span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//setter方法首先检查值是否合法，若不合法就抛出异常</span>
    <span class="token comment">//否则就将其存储起来</span>
    o<span class="token punctuation">[</span><span class="token string">&quot;set&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>predicate＆＆<span class="token operator">!</span><span class="token function">predicate</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;:invalid value&quot;</span> <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            value <span class="token operator">=</span> v<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//下面的代码展示了addPrivateProperty()方法</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//设置一个空对象</span>
<span class="token comment">//增加属性存取器方法getName()和setName()</span>
<span class="token comment">//确保只允许字符串值</span>
<span class="token function">addPrivateProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;Name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> x <span class="token operator">==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;Frank&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置属性值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到属性值</span>
o<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//试图设置一个错误类型的值</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h4 id="example5" tabindex="-1"><a class="header-anchor" href="#example5" aria-hidden="true">#</a> example5</h4><p>特别小心那些不希望共享的变量往往不经意间共享给了其他的闭包</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//返回一个函数组成的数组，它们的返回值是0～9</span>
<span class="token keyword">function</span> <span class="token function">constfuncs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        funcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> funcs<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token function">constfuncs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
funcs<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//返回值是什么? //10</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>上面这段代码创建了10个闭包，并将它们存储到一个数组中。这些闭包都是在同一个函数调用中定义的，因此它们可以共享变量i。当constfuncs()返回时，变量i的值是10</p><p>改写：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//这个函数返回一个总是返回v的函数</span>
<span class="token keyword">function</span> <span class="token function">constfunc</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> v<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">//创建一个数组用来存储常数函数</span>
<span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> funcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">constfunc</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//在第5个位置的元素所表示的函数返回值为5</span>
funcs<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//=＞5</span>
···
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_2-reference" tabindex="-1"><a class="header-anchor" href="#_2-reference" aria-hidden="true">#</a> 2. Reference</h3><p>(那些年我们一起过的JS闭包，作用域，this，让我们一起划上完美的句号)[http://www.cnblogs.com/pssp/p/5781090.html]</p><h2 id="七、函数属性、方法和构造函数" tabindex="-1"><a class="header-anchor" href="#七、函数属性、方法和构造函数" aria-hidden="true">#</a> 七、函数属性、方法和构造函数</h2><h3 id="_1-length属性" tabindex="-1"><a class="header-anchor" href="#_1-length属性" aria-hidden="true">#</a> 1. length属性</h3><p>指的是“形参”而非“实参”</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//这个函数使用arguments.callee，因此它不能在严格模式下工作</span>
<span class="token keyword">function</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> actual <span class="token operator">=</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">//实参的真实个数</span>
    <span class="token keyword">var</span> expected <span class="token operator">=</span> args<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">//期望的实参个数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>actual <span class="token operator">!==</span> expected<span class="token punctuation">)</span> <span class="token comment">//如果不同则抛出异常</span>
        <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Expected&quot;</span> <span class="token operator">+</span> expected <span class="token operator">+</span> <span class="token string">&quot;args;got&quot;</span> <span class="token operator">+</span> actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">check</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//检查实参个数和期望的实参个数是否一致</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span> <span class="token comment">//再执行函数的后续逻辑</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-prototype属性" tabindex="-1"><a class="header-anchor" href="#_2-prototype属性" aria-hidden="true">#</a> 2. prototype属性</h3><p>每一个函数都包含一个prototype属性，这个属性是指向一个对象的引用，这个对象称做“原型对象”（prototype object）。每一个函数都包含不同的原型对象。当将函数用做构造函数的时候，新创建的对象会从原型对象上继承属性。</p><h3 id="_3-call-方法和apply-方法" tabindex="-1"><a class="header-anchor" href="#_3-call-方法和apply-方法" aria-hidden="true">#</a> 3. call()方法和apply()方法</h3><p>call()和apply()的第一个实参是要调用函数的母对象，它是调用上下文，在函数体内通过this来获得对它的引用</p><p>要想以对象o的方法来调用函数f()，可以这样使用call()和apply()：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>每行代码和下面代码的功能类似（假设对象o中预先不存在名为m的属性）。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>o<span class="token punctuation">.</span>m<span class="token operator">=</span>f<span class="token punctuation">;</span><span class="token comment">//将f存储为o的临时方法</span>
o<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用它，不传入参数</span>
<span class="token keyword">delete</span> o<span class="token punctuation">.</span>m<span class="token punctuation">;</span><span class="token comment">//将临时方法删除</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果一个函数的实参可以是任意数量，给apply()传入的参数数组可以是任意长度的</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment">//6</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//6</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>传入apply()的参数数组可以是类数组对象也可以是真实数组。实际上，可以将当前函数的arguments数组直接传入（另一个函数的）apply()来调用另一个函数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//将对象o中名为m()的方法替换为另一个方法</span>
<span class="token comment">//可以在调用原始的方法之前和之后记录日志消息</span>
<span class="token keyword">function</span> <span class="token function">trace</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> original <span class="token operator">=</span> o<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//在闭包中保存原始方法</span>
    o<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//定义新的方法</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Entering:&quot;</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出日志消息</span>
        <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">original</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用原始函数</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Exiting:&quot;</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出日志消息</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span> <span class="token comment">//返回结果</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">)</span>函数接收两个参数，一个对象和一个方法名，它将指定的方法替换为一个新方法，这个新方法是“包裹”原始方法的另一个泛函数。这种动态修改已有方法的做法有时称做<span class="token string">&quot;monkey-patching&quot;</span>。
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_4-bind-方法" tabindex="-1"><a class="header-anchor" href="#_4-bind-方法" aria-hidden="true">#</a> 4. bind()方法</h3><p>将函数绑定至某个对象</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">//这个是待绑定的函数</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//将要绑定的对象</span>
<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//通过调用g(x)来调用o.f(x)</span>
<span class="token function">g</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//=＞3</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>可以通过如下代码轻易地实现这种绑定：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//返回一个函数，通过调用它来调用o中的方法f()，传递它所有的实参</span>
<span class="token keyword">function</span> <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span>bind<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//如果bind()方法存在的话，使用bind()方法</span>
    <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//否则，这样绑定</span>
        <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>除了第一个实参之外，传入bind()的实参也会绑定至this，这个附带的应用是一种常见的函数式编程技术，有时也被称为“柯里化”（currying）。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//返回两个实参的和值</span>
<span class="token comment">//创建一个类似sum的新函数，但this的值绑定到null</span>
<span class="token comment">//并且第一个参数绑定到1，这个新的函数期望只传入一个实参</span>
<span class="token keyword">var</span> succ <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">succ</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//=＞3:x绑定到1，并传入2作为实参y</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> y <span class="token operator">+</span> z
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//另外一个做累加计算的函数</span>
<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//绑定this和y</span>
<span class="token function">g</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//=＞6:this.x绑定到1，y绑定到2，z绑定到3</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="ecmascript-3版本的function-bind-方法" tabindex="-1"><a class="header-anchor" href="#ecmascript-3版本的function-bind-方法" aria-hidden="true">#</a> ECMAScript 3版本的Function.bind()方法</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>bind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>o <span class="token comment">/*,args*/</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//将this和arguments的值保存至变量中</span>
        <span class="token comment">//以便在后面嵌套的函数中可以使用它们</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
            boundArgs <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token comment">//bind()方法的返回值是一个函数</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//创建一个实参列表，将传入bind()的第二个及后续的实参都传入这个函数</span>
            <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                i<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i＜ boundArgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>boundArgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i＜ arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//现在将self作为o的方法来调用，传入这些实参</span>
            <span class="token keyword">return</span> <span class="token function">self</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ECMAScript 5定义的bind()方法也有一些特性是上述ECMAScript 3代码无法模拟的。首先，真正的bind()方法返回一个函数对象，这个函数对象的length属性是绑定函数的形参个数减去绑定实参的个数（length的值不能小于零）。再者，ECMAScript 5的bind()方法可以顺带用做构造函数。如果bind()返回的函数用做构造函数，将忽略传入bind()的t his，原始函数就会以构造函数的形式调用，其实参也已经绑定。由bind()方法所返回的函数并不包含prototype属性（普通函数固有的prototype属性是不能删除的），并且将这些绑定的函数用做构造函数时所创建的对象从原始的未绑定的构造函数中继承prototype。同样，在使用instanceof运算符时，绑定构造函数和未绑定构造函数并无两样。</p><h3 id="_5-tostring-方法" tabindex="-1"><a class="header-anchor" href="#_5-tostring-方法" aria-hidden="true">#</a> 5. toString()方法</h3><h3 id="_6-function-构造函数" tabindex="-1"><a class="header-anchor" href="#_6-function-构造函数" aria-hidden="true">#</a> 6. Function()构造函数</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> f<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;return x*y;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//等同于</span>
<span class="token keyword">var</span> <span class="token function-variable function">f</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token operator">*</span>y<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>Function()构造函数允许JavaScript在运行时动态地创建并编译函数</li><li>每次调用Function()构造函数都会解析函数体，并创建新的函数对象。如果是在一个循环或者多次调用的函数中执行这个构造函数，执行效率会受影响。相比之下，循环中的嵌套函数和函数定义表达式则不会每次执行时都重新编译。</li><li>就是它所创建的函数并不是使用词法作用域，相反，函数体代码的编译总是会在顶层函数执行</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> scope <span class="token operator">=</span> <span class="token string">&quot;global&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">constructFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> scope <span class="token operator">=</span> <span class="token string">&quot;local&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&quot;return scope&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//无法捕获局部作用域</span>
<span class="token punctuation">}</span>
<span class="token comment">//这一行代码返回global，因为通过Function()构造函数</span>
<span class="token comment">//所返回的函数使用的不是局部作用域</span>
<span class="token function">constructFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=＞&quot;global&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>我们可以将Function()构造函数认为是在全局作用域中执行的eval()，eval()可以在自己的私有作用域内定义新变量和函数，Function()构造函数在实际编程过程中很少会用到。</p><h3 id="_7-可调用的对象" tabindex="-1"><a class="header-anchor" href="#_7-可调用的对象" aria-hidden="true">#</a> 7. 可调用的对象</h3><p>检测一个对象是否是真正的函数对象（并且具有函数方法）</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isFunction</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">===</span><span class="token string">&quot;[object Function]&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="八、函数式编程" tabindex="-1"><a class="header-anchor" href="#八、函数式编程" aria-hidden="true">#</a> 八、函数式编程</h2><h3 id="_1-使用函数处理数组" tabindex="-1"><a class="header-anchor" href="#_1-使用函数处理数组" aria-hidden="true">#</a> 1. 使用函数处理数组</h3><p>非函数式编程风格:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//这里是待处理的数组</span>
<span class="token comment">//平均数是所有元素的累加和值除以元素个数</span>
<span class="token keyword">var</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> total <span class="token operator">+=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mean <span class="token operator">=</span> total <span class="token operator">/</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">//平均数是3</span>
<span class="token comment">//计算标准差，首先计算每个数据减去平均数之后偏差的平方然后求和</span>
total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> deviation <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> mean<span class="token punctuation">;</span>
    total <span class="token operator">+=</span> deviation <span class="token operator">*</span> deviation<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> stddev <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>total <span class="token operator">/</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//标准差的值是2·</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>利用map()和reduce()函数：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//首先定义两个简单的函数</span>
<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>·
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">square</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//然后将这些函数和数组方法配合使用计算出平均数和标准差</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mean <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token operator">/</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token keyword">var</span> deviations <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">-</span> mean<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> stddev <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>deviations<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>square<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>基于ECMAScript 3来实现</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//对于每个数组元素调用函数f()，并返回一个结果数组</span>
<span class="token comment">//如果Array.prototype.map定义了的话，就使用这个方法</span>
<span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>map <span class="token operator">?</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">//如果已经存在map()方法，就直接使用它</span>
<span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//否则，自己实现一个</span>
    <span class="token keyword">var</span> results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> a<span class="token punctuation">)</span> results<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> results<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//使用函数f()和可选的初始值将数组a减至一个值</span>
<span class="token comment">//如果Array.prototype.reduce存在的话，就使用这个方法</span>
<span class="token keyword">var</span> reduce <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>reduce <span class="token operator">?</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> f<span class="token punctuation">,</span> initial</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果reduce()方法存在的话</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> initial<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//如果传入了一个初始值</span>
    <span class="token keyword">else</span> <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//否则没有初始值</span>
<span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> f<span class="token punctuation">,</span> initial</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//这个算法来自ES5规范</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        len <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
        accumulator<span class="token punctuation">;</span> <span class="token comment">//以特定的初始值开始，否则第一个值取自a</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> accumulator <span class="token operator">=</span> initial<span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">//找到数组中第一个已定义的索引</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                accumulator <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> len<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//对于数组中剩下的元素依次调用f()</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> a<span class="token punctuation">)</span>
            accumulator <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> accumulator<span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        i<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> accumulator<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//调用</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">square</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mean <span class="token operator">=</span> <span class="token function">reduce</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> sum<span class="token punctuation">)</span> <span class="token operator">/</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token keyword">var</span> deviations <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">-</span> mean<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> stddev <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token function">map</span><span class="token punctuation">(</span>deviations<span class="token punctuation">,</span> square<span class="token punctuation">)</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span> <span class="token operator">/</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h3 id="_2-高阶函数" tabindex="-1"><a class="header-anchor" href="#_2-高阶函数" aria-hidden="true">#</a> 2. 高阶函数</h3><p>所谓高阶函数（higher-order function）就是操作函数的函数，它接收一个或多个函数作为参数，并返回一个新函数</p><h4 id="example1-1" tabindex="-1"><a class="header-anchor" href="#example1-1" aria-hidden="true">#</a> example1</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//这个高阶函数返回一个新的函数，这个新函数将它的实参传入f()</span>
<span class="token comment">//并返回f的返回值的逻辑非</span>
<span class="token keyword">function</span> <span class="token function">not</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//返回一个新的函数</span>
        <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用f()</span>
        <span class="token keyword">return</span> <span class="token operator">!</span>result<span class="token punctuation">;</span> <span class="token comment">//对结果求反</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">even</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//判断a是否为偶数的函数</span>
    <span class="token keyword">return</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> odd <span class="token operator">=</span> <span class="token function">not</span><span class="token punctuation">(</span>even<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//一个新函数，所做的事情和even()相反</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>odd<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=＞true:每个元素都是奇数</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="example2-1" tabindex="-1"><a class="header-anchor" href="#example2-1" aria-hidden="true">#</a> example2</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//所返回的函数的参数应当是一个实参数组，并对每个数组元素执行函数f()</span>
<span class="token comment">//并返回所有计算结果组成的数组</span>
<span class="token comment">//可以对比一下这个函数和上文提到的map()函数</span>
<span class="token keyword">function</span> <span class="token function">mapper</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">map</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> incrementer <span class="token operator">=</span> <span class="token function">mapper</span><span class="token punctuation">(</span>increment<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">incrementer</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//=＞[2,3,4]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="example3-1" tabindex="-1"><a class="header-anchor" href="#example3-1" aria-hidden="true">#</a> example3</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//返回一个新的可以计算f(g(...))的函数</span>
<span class="token comment">//返回的函数h()将它所有的实参传入g()，然后将g()的返回值传入f()</span>
<span class="token comment">//调用f()和g()时的this值和调用h()时的this值是同一个this</span>
<span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> g</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//需要给f()传入一个参数，所以使用f()的call()方法</span>
        <span class="token comment">//需要给g()传入很多参数，所以使用g()的apply()方法</span>
        <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">g</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">square</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> squareofsum <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>square<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">squareofsum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//=＞25</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_3-不完全函数" tabindex="-1"><a class="header-anchor" href="#_3-不完全函数" aria-hidden="true">#</a> 3. 不完全函数</h3><p>之前的bind方法只是将实参放在（完整实参列表的）左侧，也就是说传入bind()的实参都是放在传入原始函数的实参列表开始的位置，但有时我们期望将传入bind()的实参放在（完整实参列表的）右侧：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//实现一个工具函数将类数组对象（或对象）转换为真正的数组</span>
<span class="token comment">//在后面的示例代码中用到了这个方法将arguments对象转换为真正的数组</span>
<span class="token keyword">function</span> <span class="token function">array</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> n <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token comment">//这个函数的实参传递至左侧</span>
<span class="token keyword">function</span> <span class="token function">partialLeft</span><span class="token punctuation">(</span>f <span class="token comment">/*,...*/</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span> <span class="token comment">//保存外部的实参数组</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//并返回这个函数</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">array</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//开始处理外部的第1个args</span>
        a <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">array</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//然后增加所有的内部实参</span>
        <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//然后基于这个实参列表调用f()</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//这个函数的实参传递至右侧</span>
<span class="token keyword">function</span> <span class="token function">partialRight</span><span class="token punctuation">(</span>f <span class="token comment">/*,...*/</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span> <span class="token comment">//保存外部实参数组</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//返回这个函数</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">array</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//从内部参数开始</span>
        a <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">array</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//然后从外部第1个args开始添加</span>
        <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//最后基于这个实参列表调用f()</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//这个函数的实参被用做模板</span>
<span class="token comment">//实参列表中的undefined值都被填充</span>
<span class="token keyword">function</span> <span class="token function">partial</span><span class="token punctuation">(</span>f <span class="token comment">/*,...*/</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span> <span class="token comment">//保存外部实参数组</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">array</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//从外部args开始</span>
        <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
            j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//遍历args，从内部实参填充undefined值</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//现在将剩下的内部实参都追加进去</span>
        a <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">array</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//这个函数带有三个实参</span>
<span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> <span class="token punctuation">(</span>y <span class="token operator">-</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token comment">//注意这三个不完全调用之间的区别</span>
<span class="token function">partialLeft</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">//=＞-2:绑定第一个实参:2*(3-4)</span>
<span class="token function">partialRight</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">//=＞6:绑定最后一个实参:3*(4-2)</span>
<span class="token function">partial</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">//=＞-6:绑定中间的实参:3*(2-4)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="_4-记忆" tabindex="-1"><a class="header-anchor" href="#_4-记忆" aria-hidden="true">#</a> 4. 记忆</h3><p>阶乘函数，它可以将上次的计算结果缓存起来。在函数式编程当中，这种缓存技巧叫做“记忆”（memorization）。</p><h4 id="声明" tabindex="-1"><a class="header-anchor" href="#声明" aria-hidden="true">#</a> 声明</h4><p>memorize()接收一个函数作为实参，并返回带有记忆能力的函数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//返回f()的带有记忆功能的版本</span>
<span class="token comment">//只有当f()的实参的字符串表示都不相同时它才会工作</span>
<span class="token keyword">function</span> <span class="token function">memorize</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//将值保存在闭包内</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//将实参转换为字符串形式，并将其用做缓存的键</span>
        <span class="token keyword">var</span> key <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> cache<span class="token punctuation">)</span> <span class="token keyword">return</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">return</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="使用-1" tabindex="-1"><a class="header-anchor" href="#使用-1" aria-hidden="true">#</a> 使用</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//返回两个整数的最大公约数</span>
<span class="token comment">//使用欧几里德算法:http://en.wikipedia.org/wiki/Euclidean_algorithm</span>
<span class="token keyword">function</span> <span class="token function">gcd</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//这里省略对a和b的类型检查</span>
    <span class="token keyword">var</span> t<span class="token punctuation">;</span> <span class="token comment">//临时变量用来存储交换数值</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>a＜ b<span class="token punctuation">)</span> t <span class="token operator">=</span> b<span class="token punctuation">,</span> b <span class="token operator">=</span> a<span class="token punctuation">,</span> a <span class="token operator">=</span> t<span class="token punctuation">;</span> <span class="token comment">//确保a＞=b</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>b <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> t <span class="token operator">=</span> b<span class="token punctuation">,</span> b <span class="token operator">=</span> a <span class="token operator">%</span> b<span class="token punctuation">,</span> a <span class="token operator">=</span> t<span class="token punctuation">;</span> <span class="token comment">//这是求最大公约数的欧几里德算法</span>
    <span class="token keyword">return</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> gcdmemo <span class="token operator">=</span> <span class="token function">memorize</span><span class="token punctuation">(</span>gcd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">gcdmemo</span><span class="token punctuation">(</span><span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">187</span><span class="token punctuation">)</span> <span class="token comment">//=＞17//注意，当我们写一个递归函数时，往往需要实现记忆功能</span>
    <span class="token comment">//我们更希望调用实现了记忆功能的递归函数，而不是原递归函数</span>
<span class="token keyword">var</span> factorial <span class="token operator">=</span> <span class="token function">memoize</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>n＜ <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> n <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">//=＞120.对于4～1的值也有缓存</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/sunven/blog/edit/main/web/js/function.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2021/7/12 下午4:27:55</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 604164227@qq.com">sunven</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/blog/web/js/debounceandthrottle.html" class="nav-link" aria-label="函数防抖与函数节流"><!--[--><!--]--> 函数防抖与函数节流 <!--[--><!--]--></a></span><span class="next"><a href="/blog/web/js/html5api.html" class="nav-link" aria-label="HTML5 API"><!--[--><!--]--> HTML5 API <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/blog/assets/js/runtime~app.f6f85616.js" defer></script><script src="/blog/assets/js/2968.8f760309.js" defer></script><script src="/blog/assets/js/app.0747b7df.js" defer></script>
  </body>
</html>
