# 跨域



## 何为跨域



## 解决方法

### cors

### window.name

页面a.html,b.html同域

页面c.html

c传值给a

c.html

```js
window.name = '123'
```

b.html

可空白

a.html

```html
<iframe
  id="iframe"
  src="http://localhost:30002/"
  onload="load()"
  frameborder="0"
></iframe>
<script>
  let first = true //第一次加载
  function load() {
    if (first) {
      let iframe = document.querySelector('#iframe')
      iframe.src = 'http://localhost:30001/b.html'
      first = false
    } else {
      console.log(iframe.contentWindow.name) //yuhua
    }
  }
</script>
```

### postMessage

### JSONP

### window.domain

```js
document.domain = 'a.com';
```

两个文档，只有在 `document.domain` 都被设定为同一个值，表明他们打算协作；或者都没有设定`document.domain` 属性并且URL的域是一致的，这两种条件下，一个文档才可以去访问另一个文档。

### location.hash

页面a.html,b.html同域

页面c.html

c传值给a

c.html

```js
let iframe = document.createElement('iframe')
iframe.src = 'http://localhost:30001/b.html#18'
document.body.appendChild(iframe)
```

b.html

```js
window.parent.parent.location.hash = location.hash
```

a.html

```html
<iframe src="http://localhost:30002/" frameborder="0"></iframe>
<script>
window.onhashchange = function () {
  console.log('location.hash', location.hash)
}
</script>
```

